# ü™Ñ Medical Wand: M·∫°ng L∆∞·ªõi C·∫£m Bi·∫øn Mesh (ESP-MESH / ESP-NOW)
> **H·ªá th·ªëng Y t·∫ø Th√¥ng minh: Gi√°m s√°t T·ª´ xa & ƒêi·ªÅu khi·ªÉn B·∫±ng C·ª≠ ch·ªâ**

[![Project](https://img.shields.io/badge/Project-MedicalWand-purple.svg)]()
[![Platform](https://img.shields.io/badge/Platform-ESP32-orange.svg)]()
[![Protocol](https://img.shields.io/badge/Protocol-ESP--NOW%20%7C%20MQTT-green.svg)]()
[![Dashboard](https://img.shields.io/badge/Dashboard-Node--RED-red.svg)]()
[![License](https://img.shields.io/badge/License-MIT-blue.svg)]()

---

## 1. ƒê·∫∑t V·∫•n ƒê·ªÅ & Gi·ªõi Thi·ªáu D·ª± √Ån

**MedicalWand** l√† gi·∫£i ph√°p IoT s·ª≠ d·ª•ng ESP32, ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ n√¢ng cao ch·∫•t l∆∞·ª£ng chƒÉm s√≥c b·ªánh nh√¢n t·∫°i ph√≤ng b·ªánh. D·ª± √°n gi·∫£i quy·∫øt c√°c v·∫•n ƒë·ªÅ c·∫•p thi·∫øt nh∆∞: thi·∫øu kh·∫£ nƒÉng t·ª± ch·ªß c·ªßa b·ªánh nh√¢n, ph·∫£n ·ª©ng ch·∫≠m tr·ªÖ c·ªßa nh√¢n vi√™n y t·∫ø tr∆∞·ªõc c√°c s·ª± c·ªë ng√£/SOS, v√† nhu c·∫ßu gi√°m s√°t m√¥i tr∆∞·ªùng li√™n t·ª•c.

H·ªá th·ªëng ho·∫°t ƒë·ªông tr√™n ki·∫øn tr√∫c m·∫°ng l∆∞·ªõi lai (Hybrid Network), t·∫≠n d·ª•ng t·ªëc ƒë·ªô cao c·ªßa **ESP-NOW** cho giao ti·∫øp c·ª•c b·ªô v√† s·ª± ·ªïn ƒë·ªãnh c·ªßa **MQTT/SSL** cho k·∫øt n·ªëi Cloud.

## 2. Ki·∫øn Tr√∫c M·∫°ng L∆∞·ªõi & S∆° ƒê·ªì Kh·ªëi

Ki·∫øn tr√∫c c·ªßa MedicalWand ƒë∆∞·ª£c x√¢y d·ª±ng tr√™n m√¥ h√¨nh **Star Network** v·ªõi Node 2 (Gateway) l√†m trung t√¢m:
* **Node 1 (MedicalWand):** Thi·∫øt b·ªã ƒëeo tay, ch·ªãu tr√°ch nhi·ªám ph√°t hi·ªán ng√£, g·ª≠i SOS, v√† ƒëi·ªÅu khi·ªÉn b·∫±ng c·ª≠ ch·ªâ.
* **Node 2 (Room Hub):** Gateway nh·∫≠n d·ªØ li·ªáu t·ª´ c√°c Node kh√°c v√† c·∫£m bi·∫øn ph√≤ng, ƒëi·ªÅu khi·ªÉn thi·∫øt b·ªã ƒëi·ªán, v√† truy·ªÅn d·ªØ li·ªáu l√™n Node-RED Dashboard.
* **Node 3 (Nurse Key):** Remote c·∫ßm tay ƒë·ªÉ y t√° nh·∫≠n c·∫£nh b√°o v√† ti·∫øp nh·∫≠n/x√°c nh·∫≠n x·ª≠ l√Ω s·ª± c·ªë t·ª´ xa r·ªìi ƒë·∫øn h·ªó tr·ª£.



## 3. Ph·∫ßn C·ª©ng & S∆° ƒê·ªì Ch√¢n (Pinout)

H·ªá th·ªëng bao g·ªìm 3 Node ESP32, MPU6050, DHT11, RFID RC522, OLED SSD1306, Servo Motors, N√∫t b·∫•m v√† c√°c Actuators.

### 3.1. S∆° ƒë·ªì ch√¢n Node 1 ‚Äì Thi·∫øt b·ªã ƒëeo tay (B·ªánh nh√¢n)

| Thi·∫øt b·ªã | Ch√¢n thi·∫øt b·ªã | Ch√¢n ESP32 (Node 1) |
| :--- | :--- | :--- |
| **MPU6050** | VCC | 3.3V |
| | GND | GND |
| | SCL | GPIO 22 |
| | SDA | GPIO 21 |
| **N√∫t SOS** | 1 ch√¢n | GPIO 15 |
| | 1 ch√¢n | GND |
| **LED RGB** | Red | GPIO 5 |
| | Green | GPIO 4 |
| | Blue | GPIO 2 |
| | Common (√Çm chung) | GND |

![Node 1](images/NODE_1.jpg)

### 3.2. S∆° ƒë·ªì ch√¢n Node 2 ‚Äì Room Hub (Gateway)

| Thi·∫øt b·ªã | Ch√¢n thi·∫øt b·ªã | Ch√¢n ESP32 (Node 2) |
| :--- | :--- | :--- |
| **OLED SSD1306** | SCL | GPIO 22 |
| | SDA | GPIO 21 |
| **DHT11** | DATA | GPIO 15 |
| **RFID RC522** | SDA (SS) | GPIO 5 |
| | RST | GPIO 4 |
| | SCK | GPIO 18 |
| | MOSI | GPIO 23 |
| | MISO | GPIO 19 |
| **Servo C·ª≠a** | Signal | GPIO 13 |
| **Servo Qu·∫°t** | Signal | GPIO 14 |
| **Buzzer (C√≤i)** | + | GPIO 27 |
| **LED (ƒê√®n)** | + | GPIO 32 |

![Node 2](images/NODE_2.jpg)
### 3.3. S∆° ƒë·ªì ch√¢n Node 3 ‚Äì Nurse Key (Remote)

| Thi·∫øt b·ªã | Ch√¢n thi·∫øt b·ªã | Ch√¢n ESP32 (Node 3) |
| :--- | :--- | :--- |
| **N√∫t B·∫•m** | 1 ch√¢n | GPIO 4 |
| | 1 ch√¢n | GND |
| **Buzzer** | + | GPIO 15 |
| **LED B√°o Hi·ªáu (Red)** | + | GPIO 19 |

![Node 3](images/NODE_3.jpg)
---

## 4. T√≠nh NƒÉng N·ªïi B·∫≠t

Medical Wand cung c·∫•p c√°c t√≠nh nƒÉng c·ªët l√µi sau:

* **Ph√°t hi·ªán v√† c·∫£nh b√°o kh·∫©n c·∫•p:** T·ª± ƒë·ªông ph√°t hi·ªán t√© ng√£ (qua MPU6050) v√† n√∫t SOS cho ph√©p b·ªánh nh√¢n g·ªçi c·∫•p c·ª©u ngay l·∫≠p t·ª©c.
* **ƒêi·ªÅu khi·ªÉn b·∫±ng c·ª≠ ch·ªâ (Wand Control):** B·ªánh nh√¢n c√≥ th·ªÉ ƒëi·ªÅu khi·ªÉn ƒê√®n v√† Qu·∫°t trong ph√≤ng ch·ªâ b·∫±ng c√°ch nghi√™ng thi·∫øt b·ªã ƒëeo tay, tƒÉng c∆∞·ªùng t√≠nh t·ª± ch·ªß.
* **ƒê·ªìng b·ªô tr·∫°ng th√°i (2-Way Sync):** Tr·∫°ng th√°i thi·∫øt b·ªã ƒë∆∞·ª£c ƒë·ªìng b·ªô ho√†n h·∫£o gi·ªØa n√∫t b·∫•m v·∫≠t l√Ω, c·ª≠ ch·ªâ v√† giao di·ªán Web.
* **Gi√°m s√°t m√¥i tr∆∞·ªùng & Y t·∫ø:**
    * M√†n h√¨nh OLED t·∫°i ph√≤ng hi·ªÉn th·ªã tr·∫°ng th√°i, gi·ªù gi·∫•c, nhi·ªát ƒë·ªô/ƒë·ªô ·∫©m.
    * Node-RED Dashboard v·∫Ω bi·ªÉu ƒë·ªì th·ªùi gian th·ª±c c·ªßa Nhi·ªát ƒë·ªô/ƒê·ªô ·∫©m.
    * H·ªá th·ªëng nh·∫Øc nh·ªü u·ªëng thu·ªëc t·ª± ƒë·ªông.
* **Ph·∫£n h·ªìi nhanh:** Y t√° c√≥ th·ªÉ s·ª≠ d·ª•ng Remote (Node 3) ƒë·ªÉ t·∫Øt c√≤i v√† x√°c nh·∫≠n x·ª≠ l√Ω s·ª± c·ªë.
* **G·ª≠i Email:** T·ª± ƒë·ªông g·ª≠i Email c·∫£nh b√°o (k√®m th√¥ng s·ªë nhi·ªát ƒë·ªô/ƒë·ªô ·∫©m t·∫°i th·ªùi ƒëi·ªÉm SOS) v·ªõi t√≠nh nƒÉng ch·ªëng Spam.

---

## 5. C√†i ƒê·∫∑t & C·∫•u H√¨nh Ph·∫ßn M·ªÅm

Y√™u c·∫ßu ph·∫ßn m·ªÅm bao g·ªìm Arduino IDE (v·ªõi Board ESP32), c√°c th∆∞ vi·ªán MPU6050, DHT, ESP-NOW, PubSubClient, v√† Node-RED (v·ªõi Dashboard 2.0). C·∫ßn c·∫•u h√¨nh:
1.  Th√¥ng tin **WIFI\_SSID** v√† **MQTT Broker** trong file `Config.h` c·ªßa t·ª´ng Node.
2.  C√°c ƒë·ªãa ch·ªâ **MAC** c·ªßa c√°c Node ƒë·ªÉ thi·∫øt l·∫≠p ESP-NOW Peer.
3.  C·∫•u h√¨nh **Email SMTP** (M·∫≠t kh·∫©u ·ª©ng d·ª•ng Gmail) trong Node-RED.

---

## 6. K·∫øt Qu·∫£ D·ª± √Ån (·∫¢nh & Video)

### üì∏ Giao Di·ªán Node-RED Dashboard

H·ªá th·ªëng s·ª≠ d·ª•ng **Node-RED Dashboard 2.0** ‚Äì phi√™n b·∫£n ho√†n to√†n m·ªõi ƒë∆∞·ª£c FlowFuse ph√°t h√†nh ch√≠nh th·ª©c nƒÉm 2024, thay th·∫ø ho√†n to√†n Dashboard c≈© (node-red-dashboard 3.x).

**∆Øu ƒëi·ªÉm v∆∞·ª£t tr·ªôi so v·ªõi phi√™n b·∫£n c≈©:**
- Giao di·ªán hi·ªán ƒë·∫°i theo phong c√°ch **Glassmorphism + Neumorphism**, h·ªó tr·ª£ Dark/Light mode t·ª± ƒë·ªông.
- H·ªó tr·ª£ **responsive 100%** (ƒë·∫πp tr√™n ƒëi·ªán tho·∫°i, tablet, PC, TV ph√≤ng y t√°).
- T·ªëc ƒë·ªô render c·ª±c nhanh nh·ªù s·ª≠ d·ª•ng **Vue 3 + Vite**.
- Widget m·ªõi m·∫°nh m·∫Ω: Chart th·ªùi gian th·ª±c (d√πng Chart.js), Gauge neon, Notification toast, Table ph√¢n trang, Button c√≥ icon + hi·ªáu ·ª©ng hover.
- Theme t√πy ch·ªânh d·ªÖ d√†ng b·∫±ng JSON (m√¨nh ƒë√£ t·∫°o theme k√≠nh m·ªù trong su·ªët r·∫•t ƒë·∫πp).
- H·ªó tr·ª£ layout Grid CSS hi·ªán ƒë·∫°i, k√©o th·∫£ tho·∫£i m√°i kh√¥ng c·∫ßn code HTML.
- T√≠ch h·ª£p s·∫µn PWA ‚Üí c√≥ th·ªÉ c√†i ƒë·∫∑t l√™n m√†n h√¨nh ch√≠nh ƒëi·ªán tho·∫°i nh∆∞ app th·∫≠t.

K·∫øt qu·∫£: Ch·ªâ v·ªõi Node-RED thu·∫ßn, m√¨nh c√≥ m·ªôt dashboard tr√¥ng gi·ªëng ·ª©ng d·ª•ng th∆∞∆°ng m·∫°i tr·ªã gi√° h√†ng ngh√¨n USD, ho√†n to√†n mi·ªÖn ph√≠ v√† ch·∫°y m∆∞·ª£t tr√™n Raspberry Pi ho·∫∑c PC b·ªánh vi·ªán 24/7.

Link tham kh·∫£o ch√≠nh th·ª©c:  
https://dashboard.flowfuse.com
![Dashboard Overview](images/Dashboard.png)
*Giao di·ªán Gi√°m s√°t ch√≠nh v·ªõi thi·∫øt k·∫ø Glassmorphism v√† ƒê·ªìng h·ªì Neon*

### üõ†Ô∏è S∆° ƒë·ªì l·∫Øp ƒë·∫∑t th·ª±c t·∫ø
![Hardware Setup](images/hardware.png)
*M√¥ h√¨nh ph·∫ßn c·ª©ng ho√†n thi·ªán*

### üé• Video Demo
[Xem Video Demo ho·∫°t ƒë·ªông MedicalWand t·∫°i ƒë√¢y](https://youtu.be/p2y1Bo7qkoU)

---

## 7. K·∫øt Lu·∫≠n & H∆∞·ªõng Ph√°t Tri·ªÉn

D·ª± √°n ƒë√£ ho√†n th√†nh v√† ho·∫°t ƒë·ªông ·ªïn ƒë·ªãnh v∆∞·ª£t mong ƒë·ª£i, t·∫°o n√™n m·ªôt h·ªá th·ªëng chƒÉm s√≥c b·ªánh nh√¢n th√¥ng minh th·ª±c s·ª± c√≥ th·ªÉ tri·ªÉn khai th·ª±c t·∫ø v·ªõi chi ph√≠ th·∫•p.  
H·ªá th·ªëng kh√¥ng ch·ªâ ƒë√°p ·ª©ng ƒë·∫ßy ƒë·ªß c√°c y√™u c·∫ßu ƒë·ªÅ ra m√† c√≤n duy tr√¨ ho·∫°t ƒë·ªông li√™n t·ª•c ngay c·∫£ khi m·∫•t k·∫øt n·ªëi Internet ‚Äî ƒëi·ªÅu m√† h·∫ßu h·∫øt c√°c gi·∫£i ph√°p IoT hi·ªán nay ch∆∞a l√†m ƒë∆∞·ª£c.

**Th√†nh t·ª±u n·ªïi b·∫≠t:**
- Ph√°t hi·ªán ng√£ v√† g·ª≠i c·∫£nh b√°o kh·∫©n c·∫•p v·ªõi ƒë·ªô tr·ªÖ d∆∞·ªõi 100 ms (k·ªÉ c·∫£ offline).
- ƒêi·ªÅu khi·ªÉn thi·∫øt b·ªã b·∫±ng c·ª≠ ch·ªâ tay ch√≠nh x√°c, tr·ª±c quan cho b·ªánh nh√¢n n·∫±m li·ªát.
- Ph·∫£n h·ªìi t·ª©c th√¨ hai chi·ªÅu gi·ªØa b·ªánh nh√¢n ‚Äì y t√° ‚Äì dashboard.
- Giao di·ªán Node-RED Dashboard hi·ªán ƒë·∫°i (Glassmorphism + Dark Mode) ƒë·∫πp ngang ·ª©ng d·ª•ng th∆∞∆°ng m·∫°i.
- Qua ki·ªÉm tra ƒë√£ bi·∫øt ƒë∆∞·ª£c gi·ªõi h·∫°n l√† 10m khi kh√¥ng c√≥ v·∫≠t ch·∫Øn.

**H∆∞·ªõng ph√°t tri·ªÉn t∆∞∆°ng lai:**
- Nh√∫ng m√¥ h√¨nh TinyML (TensorFlow Lite for Microcontrollers ) l√™n ESP32 ƒë·ªÉ nh·∫≠n di·ªán ng√£ v√† c·ª≠ ch·ªâ ch√≠nh x√°c h∆°n, gi·∫£m b√°o ƒë·ªông gi·∫£.
- Th√™m c·∫£m bi·∫øn nh·ªãp tim & SpO2 (MAX30102), theo d√µi s·ª©c kh·ªèe li√™n t·ª•c.
- Ph√°t tri·ªÉn ·ª©ng d·ª•ng di ƒë·ªông Flutter/React Native cho y t√° v√† ng∆∞·ªùi nh√† nh·∫≠n th√¥ng b√°o ƒë·∫©y real-time.
- T√≠ch h·ª£p camera AI (ESP32-CAM + Edge Impulse) ƒë·ªÉ x√°c nh·∫≠n tr·ª±c quan s·ª± c·ªë ng√£.
- M·ªü r·ªông th√†nh h·ªá th·ªëng nhi·ªÅu ph√≤ng b·ªánh v·ªõi Mesh ESP-NOW + MQTT fleet management.

**Project by: [D∆∞∆°ng B√° Quy·∫øt]**  
M·ªôt d·ª± √°n nh·ªè nh∆∞ng mang l·∫°i gi√° tr·ªã th·ª±c t·∫ø r·∫•t l·ªõn cho c·ªông ƒë·ªìng chƒÉm s√≥c s·ª©c kh·ªèe.

C·∫£m ∆°n th·∫ßy c√¥, b·∫°n b√® v√† gia ƒë√¨nh ƒë√£ ƒë·ªìng h√†nh!
